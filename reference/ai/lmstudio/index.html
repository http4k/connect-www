



<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
    
    <script language="JavaScript">
  ak = "Y2JjZDg5MzE5YTUwYjYzMTYyNzFmNGMzZDc5OWM2NTc="
</script>
    <meta charset="utf-8">
<link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
<meta http-equiv="x-ua-compatible" content="ie=edge">


<meta itemprop="name" content="http4k - a functional Kotlin HTTP toolkit">
<meta property="og:title" content="http4k - a functional Kotlin HTTP toolkit" />
<meta property="og:image" content="https://www.http4k.org/img/logo-intro.png">
<meta name="twitter:title" content="http4k - a functional Kotlin HTTP toolkit">
<meta property="twitter:image" content="https://www.http4k.org/img/logo-intro.png">



<meta name="description" content="http4k-connect is a set of lightweight API libraries for connecting to popular third-party cloud services and AI backends">
<meta property="og:description" content="http4k-connect is a set of lightweight API libraries for connecting to popular third-party cloud services and AI backends" />
<meta name="twitter:description" content="http4k-connect is a set of lightweight API libraries for connecting to popular third-party cloud services and AI backends">



<link rel="canonical" href="https://connect.http4k.org/reference/ai/lmstudio/">



<meta name="author" content="David Denton (@daviddenton), Ivan Sanchez (@s4nchez)">
<meta name="twitter:creator" content="David Denton (@daviddenton), Ivan Sanchez (@s4nchez)">




<meta name="lang:clipboard.copy" content="en">

<meta name="lang:clipboard.copied" content="en">

<meta name="lang:search.language" content="en">

<meta name="lang:search.pipeline.stopwords" content="en">

<meta name="lang:search.pipeline.trimmer" content="en">

<meta name="lang:search.result.none" content="en">

<meta name="lang:search.result.one" content="en">

<meta name="lang:search.result.other" content="en">

<meta name="lang:search.tokenizer" content="en">

<!-- ****** faviconit.com favicons ****** -->
<link rel="shortcut icon" href="/img/favicon.ico">
<link rel="icon" sizes="16x16 32x32 64x64" href="/img/favicon.ico">
<link rel="icon" type="image/png" sizes="196x196" href="/img/favicon-192.png">
<link rel="icon" type="image/png" sizes="160x160" href="/img/favicon-160.png">
<link rel="icon" type="image/png" sizes="96x96" href="/img/favicon-96.png">
<link rel="icon" type="image/png" sizes="64x64" href="/img/favicon-64.png">
<link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16.png">
<link rel="apple-touch-icon" href="/img/favicon-57.png">
<link rel="apple-touch-icon" sizes="114x114" href="/img/favicon-114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/img/favicon-72.png">
<link rel="apple-touch-icon" sizes="144x144" href="/img/favicon-144.png">
<link rel="apple-touch-icon" sizes="60x60" href="/img/favicon-60.png">
<link rel="apple-touch-icon" sizes="120x120" href="/img/favicon-120.png">
<link rel="apple-touch-icon" sizes="76x76" href="/img/favicon-76.png">
<link rel="apple-touch-icon" sizes="152x152" href="/img/favicon-152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/img/favicon-180.png">
<meta name="msapplication-TileColor" content="#FFFFFF">
<meta name="msapplication-TileImage" content="/img/favicon-144.png">
<meta name="msapplication-config" content="/img/browserconfig.xml">
<!-- ****** faviconit.com favicons ****** -->
<meta name="generator" content="mkdocs-1.6.0, mkdocs-material-3.0.4">
    
    
    
    <title>LMStudio - http4k Connect</title>
    
    
    
    
    
    
    <meta name="theme-color" content="#4051b5">
    
    
    
    <link rel="stylesheet" href="/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/codehilite.css"/>
    
    
    
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700;900&amp;display=swap" rel="stylesheet"/>
    
    
    <link rel="stylesheet" href="/css/main.css"/>
    
    <link rel="stylesheet" href="../../../css/site.css">
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
</head>



<body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="blue">







<div class="intro">
    <div class="row no-gutters justify-content-center">
        <div class="aside col-auto">
    <img class="mb-3 sideToggle d-inline-block d-md-none" src="/img/exchange-icon.svg" width="20" alt="" srcset=""/>
    <a href="/">
        <div class="logo"><img src="/img/logo-intro.png" width="185" alt="logo" srcset=""/></div>
    </a>
    <ul class="nav flex-column">
        
        
        
        
    
        <li class="nav-item">
            <a class="nav-link "
               href="../../../documentation/"
               title="Introduction">Introduction</a>
        </li>
    

        
        
        
        
    
        <li class="nav-item">
            <a class="nav-link "
               href="../../../changelog/"
               title="Changelog">Changelog</a>
        </li>
    

        
        
        
        
    
        <li class="nav-item">
            <a class="nav-link "
               href="../../../contributing/"
               title="Contribute/support http4k">Contribute/support http4k</a>
        </li>
    

        
        
        
        
    
        <li class="nav-item">
            <a class="nav-link "
               href="../../../code-of-conduct/"
               title="Code of Conduct">Code of Conduct</a>
        </li>
    

        
        
        
        
    
        <li class="nav-item dropdown active show">
            <a class="nav-link dropdown-toggle active"
               data-toggle="dropdown"
               href="#"
               role="button"
               aria-haspopup="true"
               aria-expanded="true">AI</a>
            <div class="dropdown-menu show">
            
            
            
    
        <a class="dropdown-item "
           href="../langchain/"
           title="LangChain">LangChain</a>
    

            
            
            
    
        <a class="dropdown-item active"
           href="./"
           title="LMStudio">LMStudio</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../ollama/"
           title="Ollama">Ollama</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../openai/"
           title="OpenAI">OpenAI</a>
    

            
            </div>
        </li>
    

        
        
        
        
    
        <li class="nav-item dropdown ">
            <a class="nav-link dropdown-toggle "
               data-toggle="dropdown"
               href="#"
               role="button"
               aria-haspopup="true"
               aria-expanded="false">AWS</a>
            <div class="dropdown-menu ">
            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/apprunner/"
           title="App Runner">App Runner</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/cloudfront/"
           title="Cloudfront">Cloudfront</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/cloudwatchlogs/"
           title="Cloudwatch Logs">Cloudwatch Logs</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/cognito/"
           title="Cognito">Cognito</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/containercredentials/"
           title="Container Credentials">Container Credentials</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/dynamodb/"
           title="DynamoDB">DynamoDB</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/eventbridge/"
           title="EventBridge">EventBridge</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/evidently/"
           title="Evidently">Evidently</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/firehose/"
           title="Firehose">Firehose</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/iamidentitycenter/"
           title="IAM Identity Center">IAM Identity Center</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/instancemetadata/"
           title="Instance Metadata">Instance Metadata</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/kms/"
           title="KMS">KMS</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/lambda/"
           title="Lambda">Lambda</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/s3/"
           title="S3">S3</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/secretsmanager/"
           title="Secrets Manager">Secrets Manager</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/ses/"
           title="SES">SES</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/sns/"
           title="SNS">SNS</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/sqs/"
           title="SQS">SQS</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/sts/"
           title="STS">STS</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/systemsmanager/"
           title="Systems Manager">Systems Manager</a>
    

            
            </div>
        </li>
    

        
        
        
        
    
        <li class="nav-item">
            <a class="nav-link "
               href="../../github/"
               title="GitHub">GitHub</a>
        </li>
    

        
        
        
        
    
        <li class="nav-item">
            <a class="nav-link "
               href="../../gitlab/"
               title="GitLab">GitLab</a>
        </li>
    

        
        
        
        
    
        <li class="nav-item dropdown ">
            <a class="nav-link dropdown-toggle "
               data-toggle="dropdown"
               href="#"
               role="button"
               aria-haspopup="true"
               aria-expanded="false">Google</a>
            <div class="dropdown-menu ">
            
            
            
    
        <a class="dropdown-item "
           href="../../google/analytics-ua/"
           title="Analytics UA">Analytics UA</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../google/analytics-ga4/"
           title="Analytics V4">Analytics V4</a>
    

            
            </div>
        </li>
    

        
        
        
        
    
        <li class="nav-item dropdown ">
            <a class="nav-link dropdown-toggle "
               data-toggle="dropdown"
               href="#"
               role="button"
               aria-haspopup="true"
               aria-expanded="false">Kafka</a>
            <div class="dropdown-menu ">
            
            
            
    
        <a class="dropdown-item "
           href="../../kafka/rest/"
           title="REST Gateway">REST Gateway</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../kafka/schemaregistry/"
           title="Schema Registry">Schema Registry</a>
    

            
            </div>
        </li>
    

        
        
        
        
    
        <li class="nav-item">
            <a class="nav-link "
               href="../../mattermost/"
               title="Mattermost">Mattermost</a>
        </li>
    

        
        <li class="nav-item">
            <a class="nav-link" href="https://github.com/http4k/http4k-connect">
                <img src="/img/GitHub-Mark-black.png" width="28" alt="See source on GitHub">&nbsp;&nbsp;Source Code</a>
        </li>
    </ul>
</div>
        <main class="col">
          <div class="container">
                <div class="searchBox">
                  <img class="searchBoxIcon" src="/img/search-icon.svg" width="20" alt="" srcset=""/>
                  <input id="search" type="text" placeholder="Ctrl/⌘ K"/>
                </div>
                <div class="content">
                    <img class="mb-3 sideToggle" src="/img/exchange-icon.svg" width="20" alt="" srcset=""/>
                    
                    
                    <h1 id="lmstudio">LmStudio<a class="headerlink" href="#lmstudio" title="Permanent link">&para;</a></h1>
<p>The http4k-connect LmStudio integration provides:</p>
<ul>
<li>LmStudio API client</li>
<li>FakeLmStudio server which can be used as testing harness for either API client</li>
</ul>
<h2 id="lmstudio_api_connector">LmStudio API connector<a class="headerlink" href="#lmstudio_api_connector" title="Permanent link">&para;</a></h2>
<p>The LmStudio connector provides the following Actions:</p>
<ul>
<li>GetModels</li>
<li>ChatCompletion</li>
<li>CreateEmbeddings</li>
</ul>
<p>New actions can be created easily using the same transport.</p>
<p>The client APIs utilise the LmStudio API Key (Bearer Auth). There is no reflection used anywhere in the library, so
this is perfect for deploying to a Serverless function.</p>
<h3 id="example_usage">Example usage<a class="headerlink" href="#example_usage" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">USE_REAL_CLIENT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>

<span class="kd">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// we can connect to the real service or the fake (drop in replacement)</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">http</span><span class="p">:</span><span class="w"> </span><span class="n">HttpHandler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">USE_REAL_CLIENT</span><span class="p">)</span><span class="w"> </span><span class="n">JavaHttpClient</span><span class="p">()</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">FakeLmStudio</span><span class="p">()</span>

<span class="w">    </span><span class="c1">// create a client</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LmStudio</span><span class="p">.</span><span class="na">Http</span><span class="p">(</span><span class="n">http</span><span class="p">.</span><span class="na">debug</span><span class="p">())</span>

<span class="w">    </span><span class="c1">// all operations return a Result monad of the API type</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">result</span><span class="p">:</span><span class="w"> </span><span class="n">Result</span><span class="o">&lt;</span><span class="n">Models</span><span class="p">,</span><span class="w"> </span><span class="n">RemoteFailure</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span>
<span class="w">        </span><span class="p">.</span><span class="na">getModels</span><span class="p">()</span>

<span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>

<p>Other examples can be
found <a href="https://github.com/http4k/http4k-connect/tree/master/lmstudio/fake/src/examples/kotlin">here</a>.</p>
<h2 id="fake_lmstudio_server">Fake LmStudio Server<a class="headerlink" href="#fake_lmstudio_server" title="Permanent link">&para;</a></h2>
<p>The Fake LmStudio provides the below actions and can be spun up as a server, meaning it is perfect for using in test
environments without using up valuable request tokens!</p>
<ul>
<li>GetModels</li>
<li>ChatCompletion</li>
</ul>
<h3 id="generation_of_responses">Generation of responses<a class="headerlink" href="#generation_of_responses" title="Permanent link">&para;</a></h3>
<p>By default, a random LoremIpsum generator creates chat completion responses for the Fake. This behaviour can be
overridden to generate custom response formats (eg. structured responses) if required. To do so, create instances of
the <code>ChatCompletionGenerator</code> interface and return as appropriate.</p>
<h3 id="default_fake_port_58438">Default Fake port: 58438<a class="headerlink" href="#default_fake_port_58438" title="Permanent link">&para;</a></h3>
<p>To start:</p>
<div class="codehilite"><pre><span></span><code>FakeLmStudio().start()
</code></pre></div>
                    
                </div>
            </div>
        </main>
    </div>
</div>
<script src="/js/jquery.min.js"></script>
<script src="/js/bootstrap.bundle.min.js"></script>
<script src="/js/index-min.js"></script>
<script src="/js/toggle-search.js"></script>

      <script src="../../../assets/javascripts/application.583bbe55.js"></script>









<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-125143867-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>


<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
  apiKey: atob(ak),
  indexName: 'http4k',
  inputSelector: '#search',
  debug: false // Set debug to true if you want to inspect the dropdown
});
</script>
</body>
</html>