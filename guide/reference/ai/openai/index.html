



<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
    
    <script language="JavaScript">
  ak = "Y2JjZDg5MzE5YTUwYjYzMTYyNzFmNGMzZDc5OWM2NTc="
</script>
    <meta charset="utf-8">
<link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
<meta http-equiv="x-ua-compatible" content="ie=edge">


<meta itemprop="name" content="http4k Connect is a lightweight API adapter toolkit which includes libraries for connecting to popular third-party cloud services and AI backends">
<meta property="og:title" content="http4k Connect is a lightweight API adapter toolkit which includes libraries for connecting to popular third-party cloud services and AI backends" />
<meta property="og:image" content="https://connect.http4k.org/img/logo-intro.png">
<meta name="twitter:title" content="http4k Connect is a lightweight API adapter toolkit which includes libraries for connecting to popular third-party cloud services and AI backends">
<meta property="twitter:image" content="https://connect.http4k.org/img/logo-intro.png">



<meta name="description" content="http4k Connect is a lightweight API adapter toolkit which includes libraries for connecting to popular third-party cloud services and AI backends">
<meta property="og:description" content="http4k Connect is a lightweight API adapter toolkit which includes libraries for connecting to popular third-party cloud services and AI backends" />
<meta name="twitter:description" content="http4k Connect is a lightweight API adapter toolkit which includes libraries for connecting to popular third-party cloud services and AI backends">



<link rel="canonical" href="https://connect.http4k.org/guide/reference/ai/openai/">



<meta name="author" content="David Denton (@daviddenton), Ivan Sanchez (@s4nchez)">
<meta name="twitter:creator" content="David Denton (@daviddenton), Ivan Sanchez (@s4nchez)">




<meta name="lang:clipboard.copy" content="en">

<meta name="lang:clipboard.copied" content="en">

<meta name="lang:search.language" content="en">

<meta name="lang:search.pipeline.stopwords" content="en">

<meta name="lang:search.pipeline.trimmer" content="en">

<meta name="lang:search.result.none" content="en">

<meta name="lang:search.result.one" content="en">

<meta name="lang:search.result.other" content="en">

<meta name="lang:search.tokenizer" content="en">

<!-- ****** faviconit.com favicons ****** -->
<link rel="shortcut icon" href="/img/favicon.ico">
<link rel="icon" sizes="16x16 32x32 64x64" href="/img/favicon.ico">
<link rel="icon" type="image/png" sizes="196x196" href="/img/favicon-192.png">
<link rel="icon" type="image/png" sizes="160x160" href="/img/favicon-160.png">
<link rel="icon" type="image/png" sizes="96x96" href="/img/favicon-96.png">
<link rel="icon" type="image/png" sizes="64x64" href="/img/favicon-64.png">
<link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16.png">
<link rel="apple-touch-icon" href="/img/favicon-57.png">
<link rel="apple-touch-icon" sizes="114x114" href="/img/favicon-114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/img/favicon-72.png">
<link rel="apple-touch-icon" sizes="144x144" href="/img/favicon-144.png">
<link rel="apple-touch-icon" sizes="60x60" href="/img/favicon-60.png">
<link rel="apple-touch-icon" sizes="120x120" href="/img/favicon-120.png">
<link rel="apple-touch-icon" sizes="76x76" href="/img/favicon-76.png">
<link rel="apple-touch-icon" sizes="152x152" href="/img/favicon-152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/img/favicon-180.png">
<meta name="msapplication-TileColor" content="#FFFFFF">
<meta name="msapplication-TileImage" content="/img/favicon-144.png">
<meta name="msapplication-config" content="/img/browserconfig.xml">
<!-- ****** faviconit.com favicons ****** -->
<meta name="generator" content="mkdocs-1.6.0, mkdocs-material-3.0.4">
    
    
    
    <title>OpenAI - http4k Connect</title>
    
    
    <!-- Theme-related style sheets -->
    
    <link rel="stylesheet" href="../../../../assets/stylesheets/main.css" />

    <!-- Extra color palette -->
    
    
    <link
        rel="stylesheet"
        href="../../../../assets/stylesheets/palette.css"
    />
    

    <!-- Custom icons -->
    


        
    <link rel="stylesheet" href="/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/codehilite.css"/>
    
    
    
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700;900&amp;display=swap" rel="stylesheet"/>
    
    
    <link rel="stylesheet" href="/css/main.css"/>
    
    <link rel="stylesheet" href="../../../../css/site.css">
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
</head>



<body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="blue">







<div class="intro">
    <div class="row no-gutters justify-content-center">
        <div class="aside col-auto">
    <img class="mb-3 sideToggle d-inline-block d-md-none" src="/img/exchange-icon.svg" width="20" alt="" srcset=""/>
    <a href="/">
        <div class="logo"><img src="/img/logo-intro.png" width="185" alt="logo" srcset=""/></div>
    </a>
    <ul class="nav flex-column">
        
        
        
        
    
        <li class="nav-item">
            <a class="nav-link "
               href="../../../../documentation/"
               title="Introduction">Introduction</a>
        </li>
    

        
        
        
        
    
        <li class="nav-item dropdown ">
            <a class="nav-link dropdown-toggle "
               data-toggle="dropdown"
               href="#"
               role="button"
               aria-haspopup="true"
               aria-expanded="false">Concepts</a>
            <div class="dropdown-menu ">
            
            
            
    
        <a class="dropdown-item "
           href="../../../concepts/api-adapters/"
           title="API Adapters">API Adapters</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../../concepts/system-fakes/"
           title="System Fakes">System Fakes</a>
    

            
            </div>
        </li>
    

        
        
        
        
    
        <li class="nav-item dropdown ">
            <a class="nav-link dropdown-toggle "
               data-toggle="dropdown"
               href="#"
               role="button"
               aria-haspopup="true"
               aria-expanded="false">How To</a>
            <div class="dropdown-menu ">
            
            
            
    
        <a class="dropdown-item "
           href="../../../howto/implement-your-own-adapters/"
           title="Implement your own adapters">Implement your own adapters</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../../howto/pimp-your-adapters-with-ksp/"
           title="Pimp your adapters with KSP!">Pimp your adapters with KSP!</a>
    

            
            </div>
        </li>
    

        
        
        
        
    
        <li class="nav-item dropdown active show">
            <a class="nav-link dropdown-toggle active"
               data-toggle="dropdown"
               href="#"
               role="button"
               aria-haspopup="true"
               aria-expanded="true">AI Reference</a>
            <div class="dropdown-menu show">
            
            
            
    
        <a class="dropdown-item "
           href="../langchain/"
           title="LangChain">LangChain</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../lmstudio/"
           title="LMStudio">LMStudio</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../ollama/"
           title="Ollama">Ollama</a>
    

            
            
            
    
        <a class="dropdown-item active"
           href="./"
           title="OpenAI">OpenAI</a>
    

            
            </div>
        </li>
    

        
        
        
        
    
        <li class="nav-item dropdown ">
            <a class="nav-link dropdown-toggle "
               data-toggle="dropdown"
               href="#"
               role="button"
               aria-haspopup="true"
               aria-expanded="false">Cloud Reference</a>
            <div class="dropdown-menu ">
            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/"
           title="AWS Overview Guide">AWS Overview Guide</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/apprunner/"
           title="AWS App Runner">AWS App Runner</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/cloudfront/"
           title="AWS Cloudfront">AWS Cloudfront</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/cloudwatchlogs/"
           title="AWS Cloudwatch Logs">AWS Cloudwatch Logs</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/cognito/"
           title="AWS Cognito">AWS Cognito</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/containercredentials/"
           title="AWS Container Credentials">AWS Container Credentials</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/dynamodb/"
           title="AWS DynamoDB">AWS DynamoDB</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/eventbridge/"
           title="AWS EventBridge">AWS EventBridge</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/evidently/"
           title="AWS Evidently">AWS Evidently</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/firehose/"
           title="AWS Firehose">AWS Firehose</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/iamidentitycenter/"
           title="AWS IAM Identity Center">AWS IAM Identity Center</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/instancemetadata/"
           title="AWS Instance Metadata">AWS Instance Metadata</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/kms/"
           title="AWS KMS">AWS KMS</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/lambda/"
           title="AWS Lambda">AWS Lambda</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/s3/"
           title="AWS S3">AWS S3</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/secretsmanager/"
           title="AWS Secrets Manager">AWS Secrets Manager</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/ses/"
           title="AWS SES">AWS SES</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/sns/"
           title="AWS SNS">AWS SNS</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/sqs/"
           title="AWS SQS">AWS SQS</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/sts/"
           title="AWS STS">AWS STS</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../amazon/systemsmanager/"
           title="AWS Systems Manager">AWS Systems Manager</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../github/"
           title="GitHub">GitHub</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../gitlab/"
           title="GitLab">GitLab</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../google/analytics-ua/"
           title="Google Analytics UA">Google Analytics UA</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../google/analytics-ga4/"
           title="Google Analytics V4">Google Analytics V4</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../kafka/rest/"
           title="Kafka REST Gateway">Kafka REST Gateway</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../kafka/schemaregistry/"
           title="Kafka Schema Registry">Kafka Schema Registry</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../mattermost/"
           title="Mattermost">Mattermost</a>
    

            
            </div>
        </li>
    

        
        
        
        
    
        <li class="nav-item dropdown ">
            <a class="nav-link dropdown-toggle "
               data-toggle="dropdown"
               href="#"
               role="button"
               aria-haspopup="true"
               aria-expanded="false">Storage Reference</a>
            <div class="dropdown-menu ">
            
            
            
    
        <a class="dropdown-item "
           href="../../storage/core/"
           title="File">File</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../storage/http/"
           title="HTTP">HTTP</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../storage/core/"
           title="File">File</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../storage/jdbc/"
           title="JDBC">JDBC</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../storage/redis/"
           title="Redis">Redis</a>
    

            
            
            
    
        <a class="dropdown-item "
           href="../../storage/s3/"
           title="S3">S3</a>
    

            
            </div>
        </li>
    

        
        
        
        
    
        <li class="nav-item">
            <a class="nav-link "
               href="../../../../changelog/"
               title="Changelog">Changelog</a>
        </li>
    

        
        
        
        
    
        <li class="nav-item">
            <a class="nav-link "
               href="../../../../contributing/"
               title="Contribute/support http4k">Contribute/support http4k</a>
        </li>
    

        
        
        
        
    
        <li class="nav-item">
            <a class="nav-link "
               href="../../../../code-of-conduct/"
               title="Code of Conduct">Code of Conduct</a>
        </li>
    

        
        <li class="nav-item">
            <a class="nav-link" href="https://github.com/http4k/http4k-connect">
                <img src="/img/GitHub-Mark-black.png" width="28" alt="See source on GitHub">&nbsp;&nbsp;Source Code</a>
        </li>
    </ul>
</div>
        <main class="col">
          <div class="container">
                <div class="searchBox">
                  <img class="searchBoxIcon" src="/img/search-icon.svg" width="20" alt="" srcset=""/>
                  <input id="search" type="text" placeholder="Ctrl/⌘ K"/>
                </div>
                <div class="content">
                    <img class="mb-3 sideToggle" src="/img/exchange-icon.svg" width="20" alt="" srcset=""/>
                    
                    
                    <h1 id="openai">OpenAI<a class="headerlink" href="#openai" title="Permanent link">&para;</a></h1>
<h3 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="n">dependencies</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">implementation</span><span class="p">(</span><span class="n">platform</span><span class="p">(</span><span class="s">&quot;org.http4k:http4k-connect-bom:5.20.0.0&quot;</span><span class="p">))</span>
<span class="w">    </span><span class="n">implementation</span><span class="p">(</span><span class="s">&quot;org.http4k:http4k-connect-ai-openai&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">implementation</span><span class="p">(</span><span class="s">&quot;org.http4k:http4k-connect-ai-openai-fake&quot;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>

<p>The http4k-connect OpenAI integration provides:
- OpenAI API client
- Plugin SDK for developing <a href="https://platform.openai.com/docs/plugins">OpenAI plugins</a>
- FakeOpenAI server which can be used as testing harness for either API client or OpenAI plugins</p>
<h2 id="openai_api_connector">OpenAI API connector<a class="headerlink" href="#openai_api_connector" title="Permanent link">&para;</a></h2>
<p>The OpenAI connector provides the following Actions:</p>
<ul>
<li>GetModels</li>
<li>ChatCompletion</li>
<li>CreateEmbeddings</li>
<li>GenerateImage</li>
</ul>
<p>New actions can be created easily using the same transport.</p>
<p>The client APIs utilise the OpenAI API Key (Bearer Auth). There is no reflection used anywhere in the library, so
this is perfect for deploying to a Serverless function.</p>
<h3 id="example_usage">Example usage<a class="headerlink" href="#example_usage" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">USE_REAL_CLIENT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>

<span class="kd">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// we can connect to the real service or the fake (drop in replacement)</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">http</span><span class="p">:</span><span class="w"> </span><span class="n">HttpHandler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">USE_REAL_CLIENT</span><span class="p">)</span><span class="w"> </span><span class="n">JavaHttpClient</span><span class="p">()</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">FakeOpenAI</span><span class="p">()</span>

<span class="w">    </span><span class="c1">// create a client</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OpenAI</span><span class="p">.</span><span class="na">Http</span><span class="p">(</span><span class="n">OpenAIToken</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;foobar&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">http</span><span class="p">.</span><span class="na">debug</span><span class="p">())</span>

<span class="w">    </span><span class="c1">// all operations return a Result monad of the API type</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">result</span><span class="p">:</span><span class="w"> </span><span class="n">Result</span><span class="o">&lt;</span><span class="n">Models</span><span class="p">,</span><span class="w"> </span><span class="n">RemoteFailure</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span>
<span class="w">        </span><span class="p">.</span><span class="na">getModels</span><span class="p">()</span>

<span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>

<p>Other examples can be found <a href="https://github.com/http4k/http4k-connect/tree/master/openai/fake/src/examples/kotlin">here</a>.</p>
<h1 id="openai_plugin_sdk">OpenAI Plugin SDK<a class="headerlink" href="#openai_plugin_sdk" title="Permanent link">&para;</a></h1>
<p>The OpenAPI Plugin SDK provides APIs to simply write OpenAI compliant plugins with the minimum of fuss. Simply 
use the <code>openAiPlugin()</code> function to compose your function, adding the configuration for the authorization and 
the contract endpoints which expose the API to OpenAI. </p>
<p>The following plugin types are supported:
- Service - the Plugin developer provides credentials to the OpenAI UI which are used for auth. No personalisation 
of responses is possible.
- User - the OpenAI user provides credentials to the OpenAI UI which are used for auth. Prinicpals are tracked so the
API responses can be personalised.
- OAuth - users login to the Plugin application using an AuthorizationCode grant and an experience defined by the 
Plugin developer.</p>
<p>The SDK provides all features required by the OpenAI platform:
- A manifest endpoint for the plugin, with all of the required configuration 
- An OpenAPI specification endpoint for OpenAI to interrogate your API
- Security on the API endpoints as defined on construction. Supported auth methods are:
  - Basic Auth
  - Bearer Auth
  - OAuth (Authorization flow) - with security endpoints. </p>
<p>Plugins are just <code>HttpHandlers</code> and as such can be mixed into existing applications or started alone. Example:</p>
<div class="codehilite"><pre><span></span><code><span class="w"> </span><span class="n">openAiPlugin</span><span class="p">(</span>
<span class="w">        </span><span class="n">info</span><span class="p">(</span>
<span class="w">            </span><span class="n">apiVersion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;1.0&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="n">humanDescription</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;addressbook&quot;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="s">&quot;my great plugin&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="n">pluginUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Uri</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;http://localhost:9000&quot;</span><span class="p">),</span>
<span class="w">            </span><span class="n">contactEmail</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Email</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;foo@bar&quot;</span><span class="p">),</span>
<span class="w">        </span><span class="p">),</span>
<span class="w">        </span><span class="n">UserLevelAuth</span><span class="p">(</span>
<span class="w">            </span><span class="n">PluginAuthToken</span><span class="p">.</span><span class="na">Basic</span><span class="p">(</span><span class="s">&quot;realm&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">it</span><span class="p">:</span><span class="w"> </span><span class="n">Credentials</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nb">it</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">credentials</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="p">),</span>
<span class="w">        </span><span class="n">Path</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">Path</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;bar&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">meta</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">summary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;A great api endpoint&quot;</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="n">bindContract</span><span class="w"> </span><span class="n">GET</span><span class="w"> </span><span class="n">to</span>
<span class="w">            </span><span class="p">{</span><span class="w"> </span><span class="n">foo</span><span class="p">,</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">                </span><span class="p">{</span><span class="w"> </span><span class="n">_</span><span class="p">:</span><span class="w"> </span><span class="n">Request</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Response</span><span class="p">(</span><span class="n">OK</span><span class="p">).</span><span class="na">with</span><span class="p">(</span><span class="n">Body</span><span class="p">.</span><span class="na">auto</span><span class="o">&lt;</span><span class="n">Message</span><span class="o">&gt;</span><span class="p">().</span><span class="na">toLens</span><span class="p">()</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">Message</span><span class="p">(</span><span class="s">&quot;hello </span><span class="si">$</span><span class="n">foo</span><span class="s"> </span><span class="si">$</span><span class="n">bar</span><span class="s">&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">    </span><span class="p">)</span>
</code></pre></div>

<p>The FakeOpenAI server also provides support for running plugins locally and interacting with them as "installed" in the fake.</p>
<p>There is a full working example of how to create and deploy plugins in the <a href="https://github.com/http4k/http4k-connect-examples/tree/master/developing-openai-plugins">examples repository</a>.</p>
<h2 id="fake_openai_server">Fake OpenAI Server<a class="headerlink" href="#fake_openai_server" title="Permanent link">&para;</a></h2>
<p>The Fake OpenAI provides the below actions and can be spun up as a server, meaning it is perfect for using in test
environments without using up valuable request tokens!</p>
<ul>
<li>GetModels</li>
<li>ChatCompletion</li>
<li>GenerateImage</li>
</ul>
<h3 id="security">Security<a class="headerlink" href="#security" title="Permanent link">&para;</a></h3>
<p>The Fake server endpoints are secured with a BearerToken header, but the value is not checked for anything other than
presence.</p>
<h3 id="image_generation">Image generation<a class="headerlink" href="#image_generation" title="Permanent link">&para;</a></h3>
<p>Image generation also can be set to either URL or base-64 data return. In the case of URLs, the Fake also doubles as a
webserver for serving the images (so you can request an image and then load it from the server). Resolution PNG images
of 256x/512x/1024x are supported.</p>
<h3 id="generation_of_responses">Generation of responses<a class="headerlink" href="#generation_of_responses" title="Permanent link">&para;</a></h3>
<p>By default, a random LoremIpsum generator creates chat completion responses for the Fake. This behaviour can be
overridden to generate custom response formats (eg. structured responses) if required. To do so, create instances of
the <code>ChatCompletionGenerator</code> interface and return as appropriate.</p>
<h3 id="running_plugins_in_the_fakeopenai">Running plugins in the FakeOpenAI<a class="headerlink" href="#running_plugins_in_the_fakeopenai" title="Permanent link">&para;</a></h3>
<p>http4k-connect OpenAI Plugins can be run locally and also "installed" into the FakeOpenAI. To install a plugin,
pass the configured <code>PluginIntegration</code> instances into the fake at construction time. The FakeOpenAI will then 
use the configuration to negotiate the connection to the plugin. Both the Fake and the Plugin should be running 
on different local ports.</p>
<div class="codehilite"><pre><span></span><code><span class="w"> </span><span class="n">FakeOpenAI</span><span class="p">(</span>
<span class="w">        </span><span class="n">plugins</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arrayOf</span><span class="p">(</span>
<span class="w">            </span><span class="n">ServicePluginIntegration</span><span class="p">(</span>
<span class="w">                </span><span class="n">BearerAuth</span><span class="p">(</span><span class="s">&quot;openai api key&quot;</span><span class="p">),</span>
<span class="w">                </span><span class="n">OpenAIPluginId</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;serviceplugin&quot;</span><span class="p">),</span>
<span class="w">                </span><span class="n">Uri</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;http://localhost:10000&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">)</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">    </span><span class="p">).</span><span class="na">start</span><span class="p">()</span>
</code></pre></div>

<p>To test the Plugin locally, start and browse to the FakeOpenAI instance. The list of installed plugins will 
be displayed and can be clicked through to an authenticated OpenAPI UI which can be used to interact with the 
exposed Plugin API.</p>
<h3 id="default_fake_port_45674">Default Fake port: 45674<a class="headerlink" href="#default_fake_port_45674" title="Permanent link">&para;</a></h3>
<p>To start:</p>
<div class="codehilite"><pre><span></span><code>FakeOpenAI().start()
</code></pre></div>
                    
                </div>
            </div>
        </main>
    </div>
</div>
<script src="/js/jquery.min.js"></script>
<script src="/js/bootstrap.bundle.min.js"></script>
<script src="/js/index-min.js"></script>
<script src="/js/toggle-search.js"></script>

      <script src="../../../../assets/javascripts/application.583bbe55.js"></script>




<script src="../../../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>

















<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
  apiKey: atob(ak),
  indexName: 'http4k-connect',
  inputSelector: '#search',
  debug: false // Set debug to true if you want to inspect the dropdown
});
</script>
</body>
</html>